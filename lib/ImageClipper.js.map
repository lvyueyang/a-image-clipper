{"version":3,"file":"ImageClipper.js","sources":["../node_modules/_tslib@1.13.0@tslib/tslib.es6.js","../node_modules/_any-event@0.7.2@any-event/dist/index.es.js","../node_modules/_@any-touch_shared@0.7.2@@any-touch/shared/dist/index.es.js","../node_modules/_@any-touch_core@0.7.2@@any-touch/core/dist/index.es.js","../node_modules/_@any-touch_vector@0.7.2@@any-touch/vector/dist/index.es.js","../node_modules/_@any-touch_compute@0.7.2@@any-touch/compute/dist/index.es.js","../node_modules/_@any-touch_recognizer@0.7.2@@any-touch/recognizer/dist/index.es.js","../node_modules/_@any-touch_pan@0.7.2@@any-touch/pan/dist/index.es.js","../src/Observer.js","../src/utils.js","../src/main.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __values } from 'tslib';\n\nvar default_1 = (function () {\n    function default_1() {\n        this.listenersMap = {};\n    }\n    default_1.prototype.target = function (el) {\n        var _this = this;\n        return {\n            on: function (eventName, listener) {\n                _this.on(eventName, listener, { target: el });\n            }\n        };\n    };\n    default_1.prototype.on = function (eventName, listener, _a) {\n        var target = (_a === void 0 ? {} : _a).target;\n        if (void 0 === this.listenersMap[eventName]) {\n            this.listenersMap[eventName] = [];\n        }\n        if (void 0 !== target) {\n            listener.target = target;\n        }\n        this.listenersMap[eventName].push(listener);\n    };\n    default_1.prototype.off = function (eventName, listener) {\n        var listeners = this.listenersMap[eventName];\n        if (void 0 !== listeners) {\n            if (void 0 === listener) {\n                delete this.listenersMap[eventName];\n            }\n            else {\n                var index = listeners.findIndex(function (fn) { return fn === listener; });\n                listeners.splice(index, 1);\n            }\n        }\n    };\n    default_1.prototype.emit = function (eventName, payload, beforeHook) {\n        var e_1, _a;\n        if (beforeHook === void 0) { beforeHook = function () { return true; }; }\n        var listeners = this.listenersMap[eventName];\n        if (void 0 !== listeners && 0 < listeners.length) {\n            try {\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\n                    var listener = listeners_1_1.value;\n                    var target = listener.target;\n                    if (beforeHook({ target: target })) {\n                        listener(payload);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    };\n    default_1.prototype.destroy = function () {\n        this.listenersMap = {};\n    };\n    return default_1;\n}());\n\nexport default default_1;\n","var ObjectToString = Object.prototype.toString;\nfunction isRegExp(input) {\n    return '[object RegExp]' === ObjectToString.call(input);\n}\nfunction isFunction(input) {\n    return '[object Function]' === ObjectToString.call(input);\n}\n\nvar CLIENT_X = 'clientX';\nvar CLIENT_Y = 'clientY';\nvar COMPUTE_INTERVAL = 16;\nvar INPUT_START = 'start';\nvar INPUT_MOVE = 'move';\nvar INPUT_CANCEL = 'cancel';\nvar INPUT_END = 'end';\nvar DIRECTION_LEFT = 'left';\nvar DIRECTION_RIGHT = 'right';\nvar DIRECTION_UP = 'up';\nvar DIRECTION_DOWN = 'down';\nvar NONE = 'none';\nvar TOUCH = 'touch';\nvar MOUSE = 'mouse';\nvar TOUCH_START = TOUCH + INPUT_START;\nvar TOUCH_MOVE = TOUCH + INPUT_MOVE;\nvar TOUCH_END = TOUCH + INPUT_END;\nvar TOUCH_CANCEL = TOUCH + INPUT_CANCEL;\nvar MOUSE_UP = MOUSE + DIRECTION_UP;\nvar MOUSE_MOVE = MOUSE + INPUT_MOVE;\nvar MOUSE_DOWN = MOUSE + DIRECTION_DOWN;\nvar SUPPORT_TOUCH = \"on\" + TOUCH_START in window;\nvar STATUS_POSSIBLE = 'p';\nvar STATUS_START = INPUT_START;\nvar STATUS_MOVE = INPUT_MOVE;\nvar STATUS_END = INPUT_END;\nvar STATUS_RECOGNIZED = 'r';\nvar STATUS_FAILED = 'f';\nvar STATUS_CANCELLED = INPUT_CANCEL;\n\nfunction round2(n) {\n    return Math.round(n * 100) / 100;\n}\n\nexport { CLIENT_X, CLIENT_Y, COMPUTE_INTERVAL, DIRECTION_DOWN, DIRECTION_LEFT, DIRECTION_RIGHT, DIRECTION_UP, INPUT_CANCEL, INPUT_END, INPUT_MOVE, INPUT_START, MOUSE, MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, NONE, STATUS_CANCELLED, STATUS_END, STATUS_FAILED, STATUS_MOVE, STATUS_POSSIBLE, STATUS_RECOGNIZED, STATUS_START, SUPPORT_TOUCH, TOUCH, TOUCH_CANCEL, TOUCH_END, TOUCH_MOVE, TOUCH_START, isFunction, isRegExp, round2 };\n","import { __extends, __assign, __rest, __values, __read } from 'tslib';\nimport AnyEvent from 'any-event';\nimport { MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, INPUT_START, INPUT_MOVE, INPUT_END, INPUT_CANCEL, SUPPORT_TOUCH, CLIENT_X, CLIENT_Y, isRegExp, isFunction, TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL, TOUCH } from '@any-touch/shared';\n\nvar default_1 = (function () {\n    function default_1() {\n    }\n    return default_1;\n}());\n\nvar default_1$1 = (function (_super) {\n    __extends(default_1, _super);\n    function default_1() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    default_1.prototype.load = function (event) {\n        var targets = [];\n        var points = Array.from(event.touches).map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\n            targets.push(target);\n            return { clientX: clientX, clientY: clientY, target: target };\n        });\n        var changedPoints = Array.from(event.changedTouches).map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\n            return ({ clientX: clientX, clientY: clientY, target: target });\n        });\n        return {\n            inputType: event.type.replace('touch', ''),\n            changedPoints: changedPoints,\n            points: points,\n            nativeEvent: event,\n            target: event.target,\n            targets: targets\n        };\n    };\n    return default_1;\n}(default_1));\n\nvar default_1$2 = (function (_super) {\n    __extends(default_1, _super);\n    function default_1() {\n        var _this = _super.call(this) || this;\n        _this.target = null;\n        _this.isPressed = false;\n        return _this;\n    }\n    default_1.prototype.load = function (event) {\n        var clientX = event.clientX, clientY = event.clientY, type = event.type, button = event.button, target = event.target;\n        var points = [{ clientX: clientX, clientY: clientY, target: target }];\n        var inputType;\n        if (MOUSE_DOWN === type && 0 === button) {\n            this.target = target;\n            this.isPressed = true;\n            inputType = INPUT_START;\n        }\n        else if (this.isPressed) {\n            if (MOUSE_MOVE === type) {\n                inputType = INPUT_MOVE;\n            }\n            else if (MOUSE_UP === type) {\n                points = [];\n                inputType = INPUT_END;\n                this.isPressed = false;\n            }\n        }\n        var changedPoints = this.prevPoints || [{ clientX: clientX, clientY: clientY, target: target }];\n        this.prevPoints = [{ clientX: clientX, clientY: clientY, target: target }];\n        if (void 0 !== inputType) {\n            return {\n                inputType: inputType,\n                changedPoints: changedPoints,\n                points: points,\n                target: this.target,\n                targets: [this.target],\n                nativeEvent: event\n            };\n        }\n    };\n    return default_1;\n}(default_1));\n\nvar default_1$3 = (function () {\n    function default_1() {\n        var Input = SUPPORT_TOUCH ? default_1$1 : default_1$2;\n        this.adapter = new Input();\n        this.id = 0;\n    }\n    default_1.prototype.transform = function (event) {\n        this.prevInput = this.activeInput;\n        var baseInputWithoutId = this.adapter.load(event);\n        if (void 0 !== baseInputWithoutId) {\n            var id = Number.MAX_SAFE_INTEGER > this.id ? ++this.id : 1;\n            var baseInput = __assign(__assign({}, baseInputWithoutId), { id: id });\n            var pureInput = extendInput(baseInput);\n            this.activeInput = pureInput;\n            var isStart = pureInput.isStart, pointLength = pureInput.pointLength;\n            if (isStart) {\n                this.startInput = pureInput;\n                this.prevInput = void 0;\n                if (1 < pointLength) {\n                    this.startMultiInput = pureInput;\n                }\n                else {\n                    this.startMultiInput = void 0;\n                }\n            }\n            return __assign(__assign({}, pureInput), { prevInput: this.prevInput, startMultiInput: this.startMultiInput, startInput: this.startInput });\n        }\n    };\n    return default_1;\n}());\nfunction getCenter(points) {\n    var length = points.length;\n    if (0 < length) {\n        if (1 === length) {\n            var _a = points[0], clientX = _a.clientX, clientY = _a.clientY;\n            return { x: Math.round(clientX), y: Math.round(clientY) };\n        }\n        var countPoint = points.reduce(function (countPoint, point) {\n            countPoint.x += point[CLIENT_X];\n            countPoint.y += point[CLIENT_Y];\n            return countPoint;\n        }, { x: 0, y: 0 });\n        return { x: Math.round(countPoint.x / length), y: Math.round(countPoint.y / length) };\n    }\n}\nfunction extendInput(inputBase) {\n    var inputType = inputBase.inputType, points = inputBase.points, changedPoints = inputBase.changedPoints, nativeEvent = inputBase.nativeEvent;\n    var pointLength = points.length;\n    var isStart = INPUT_START === inputType;\n    var isEnd = (INPUT_END === inputType && 0 === pointLength) || INPUT_CANCEL === inputType;\n    var timestamp = performance.now();\n    var _a = getCenter(points) || getCenter(changedPoints), x = _a.x, y = _a.y;\n    var currentTarget = nativeEvent.currentTarget;\n    return __assign(__assign({}, inputBase), { x: x, y: y,\n        timestamp: timestamp,\n        isStart: isStart, isEnd: isEnd,\n        pointLength: pointLength,\n        currentTarget: currentTarget,\n        getOffset: function (el) {\n            if (el === void 0) { el = currentTarget; }\n            var rect = el.getBoundingClientRect();\n            return { x: x - Math.round(rect.left), y: y - Math.round(rect.top) };\n        } });\n}\n\nfunction dispatchDomEvent (el, payload, eventInit) {\n    var target = payload.target, currentTarget = payload.currentTarget, type = payload.type, data = __rest(payload, [\"target\", \"currentTarget\", \"type\"]);\n    var event;\n    if ('createEvent' in document) {\n        event = document.createEvent('HTMLEvents');\n        event.initEvent(type, eventInit === null || eventInit === void 0 ? void 0 : eventInit.bubbles, eventInit === null || eventInit === void 0 ? void 0 : eventInit.cancelable);\n    }\n    else {\n        event = new Event(type, eventInit);\n    }\n    Object.assign(event, data, {\n        match: function () {\n            return payload.targets.every(function (target) {\n                return event.currentTarget.contains(target);\n            });\n        }\n    });\n    return el.dispatchEvent(event);\n}\n\nfunction canPreventDefault (event, options) {\n    if (!options.isPreventDefault)\n        return false;\n    var isPreventDefault = true;\n    if (null !== event.target) {\n        var preventDefaultExclude = options.preventDefaultExclude;\n        if (isRegExp(preventDefaultExclude)) {\n            if ('tagName' in event.target) {\n                var tagName = event.target.tagName;\n                isPreventDefault = !preventDefaultExclude.test(tagName);\n            }\n        }\n        else if (isFunction(preventDefaultExclude)) {\n            isPreventDefault = !preventDefaultExclude(event);\n        }\n    }\n    return isPreventDefault;\n}\n\nvar TOUCH_EVENT_NAMES = [TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL];\nfunction bindElement (el, callback, options) {\n    if (SUPPORT_TOUCH) {\n        TOUCH_EVENT_NAMES.forEach(function (eventName) {\n            el.addEventListener(eventName, callback, options);\n        });\n        return function () {\n            TOUCH_EVENT_NAMES.forEach(function (eventName) {\n                el.removeEventListener(eventName, callback);\n            });\n        };\n    }\n    else {\n        el.addEventListener(MOUSE_DOWN, callback, options);\n        window.addEventListener(MOUSE_MOVE, callback, options);\n        window.addEventListener(MOUSE_UP, callback, options);\n        return function () {\n            el.removeEventListener(MOUSE_DOWN, callback);\n            window.removeEventListener(MOUSE_MOVE, callback);\n            window.removeEventListener(MOUSE_UP, callback);\n        };\n    }\n}\n\nfunction use(instanceOrClass, Recognizer, options) {\n    var name = options === null || options === void 0 ? void 0 : options.name;\n    if (void 0 !== name && void 0 !== instanceOrClass.recognizerMap[name])\n        return;\n    var instance = new Recognizer(options);\n    instanceOrClass.recognizerMap[instance.name] = instance;\n    instance.recognizerMap = instanceOrClass.recognizerMap;\n    instanceOrClass.recognizers.push(instanceOrClass.recognizerMap[instance.name]);\n}\nfunction removeUse(instanceOrClass, recognizerName) {\n    var e_1, _a;\n    if (void 0 === recognizerName) {\n        instanceOrClass.recognizers = [];\n        instanceOrClass.recognizerMap = {};\n    }\n    else {\n        try {\n            for (var _b = __values(instanceOrClass.recognizers.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), index = _d[0], recognizer = _d[1];\n                if (recognizerName === recognizer.options.name) {\n                    instanceOrClass.recognizers.splice(index, 1);\n                    delete instanceOrClass.recognizerMap[recognizerName];\n                    break;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n}\n\nfunction emit2(at, payload) {\n    var type = payload.type, target = payload.target, targets = payload.targets;\n    at.emit(type, payload, function (data) {\n        if (void 0 !== (data === null || data === void 0 ? void 0 : data.target)) {\n            var currentTarget_1 = data.target;\n            return targets.every(function (target) { return currentTarget_1.contains(target); });\n        }\n        return true;\n    });\n    var AT_AFTER = 'at:after';\n    at.emit(AT_AFTER, payload);\n    if (!!at.options.domEvents\n        && void 0 !== at.el\n        && null !== target) {\n        dispatchDomEvent(target, payload, at.options.domEvents);\n        dispatchDomEvent(target, __assign(__assign({}, payload), { type: AT_AFTER }), at.options.domEvents);\n    }\n}\n\nvar DEFAULT_OPTIONS = {\n    domEvents: { bubbles: true, cancelable: true },\n    isPreventDefault: true,\n    preventDefaultExclude: /^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/\n};\nvar AnyTouch = (function (_super) {\n    __extends(AnyTouch, _super);\n    function AnyTouch(el, options) {\n        var _this = _super.call(this) || this;\n        _this.recognizerMap = {};\n        _this.recognizers = [];\n        _this.cacheComputedFunctionGroup = Object.create(null);\n        _this.el = el;\n        _this.input = new default_1$3();\n        _this.options = __assign(__assign({}, DEFAULT_OPTIONS), options);\n        _this.recognizerMap = AnyTouch.recognizerMap;\n        _this.recognizers = AnyTouch.recognizers;\n        if (void 0 !== el) {\n            el.style.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n            var supportsPassive_1 = false;\n            try {\n                var opts = {};\n                Object.defineProperty(opts, 'passive', ({\n                    get: function () {\n                        supportsPassive_1 = true;\n                    }\n                }));\n                window.addEventListener('_', function () { return void 0; }, opts);\n            }\n            catch (_a) { }\n            _this.on('unbind', bindElement(el, _this.catchEvent.bind(_this), !_this.options.isPreventDefault && supportsPassive_1 ? { passive: true } : false));\n        }\n        return _this;\n    }\n    AnyTouch.prototype.use = function (Recognizer, options) {\n        use(this, Recognizer, options);\n    };\n    AnyTouch.prototype.removeUse = function (name) {\n        removeUse(this, name);\n    };\n    AnyTouch.prototype.catchEvent = function (event) {\n        var e_1, _a;\n        var _this = this;\n        if (canPreventDefault(event, this.options)) {\n            event.preventDefault();\n        }\n        var input = this.input.transform(event);\n        if (void 0 !== input) {\n            var AT_TOUCH = \"at:\" + TOUCH;\n            var AT_TOUCH_WITH_STATUS = AT_TOUCH + input.inputType;\n            this.emit(AT_TOUCH, input);\n            this.emit(AT_TOUCH_WITH_STATUS, input);\n            var domEvents = this.options.domEvents;\n            if (false !== domEvents) {\n                var target = event.target;\n                if (null !== target) {\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH }), domEvents);\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH_WITH_STATUS }), domEvents);\n                }\n            }\n            var cacheComputedGroup = Object.create(null);\n            var _loop_1 = function (recognizer) {\n                if (recognizer.disabled)\n                    return \"continue\";\n                recognizer.computedGroup = cacheComputedGroup;\n                recognizer.computeFunctionMap = this_1.cacheComputedFunctionGroup;\n                recognizer.recognize(input, function (type, ev) {\n                    var payload = __assign(__assign(__assign({}, input), ev), { type: type, baseType: recognizer.name });\n                    Object.freeze(payload);\n                    if (void 0 === _this.beforeEachHook) {\n                        emit2(_this, payload);\n                    }\n                    else {\n                        _this.beforeEachHook(recognizer, function () {\n                            emit2(_this, payload);\n                        });\n                    }\n                });\n                cacheComputedGroup = recognizer.computedGroup;\n                this_1.cacheComputedFunctionGroup = recognizer.computeFunctionMap;\n            };\n            var this_1 = this;\n            try {\n                for (var _b = __values(this.recognizers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var recognizer = _c.value;\n                    _loop_1(recognizer);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    };\n    AnyTouch.prototype.beforeEach = function (hook) {\n        this.beforeEachHook = hook;\n    };\n    AnyTouch.prototype.get = function (name) {\n        return this.recognizerMap[name];\n    };\n    AnyTouch.prototype.set = function (options) {\n        this.options = __assign(__assign({}, this.options), options);\n    };\n    AnyTouch.prototype.destroy = function () {\n        this.emit('unbind');\n        this.listenersMap = {};\n    };\n    AnyTouch.version = '0.7.1';\n    AnyTouch.recognizers = [];\n    AnyTouch.recognizerMap = {};\n    AnyTouch.use = function (Recognizer, options) {\n        use(AnyTouch, Recognizer, options);\n    };\n    AnyTouch.removeUse = function (recognizerName) {\n        removeUse(AnyTouch, recognizerName);\n    };\n    return AnyTouch;\n}(AnyEvent));\n\nexport default AnyTouch;\n","import { NONE, DIRECTION_RIGHT, DIRECTION_LEFT, DIRECTION_DOWN, DIRECTION_UP } from '@any-touch/shared';\n\nvar getVLength = (function (v) {\n    return Math.sqrt(v.x * v.x + v.y * v.y);\n});\n\nvar getDotProduct = (function (v1, v2) {\n    return v1.x * v2.x + v1.y * v2.y;\n});\n\nvar getRadian = (function (v1, v2) {\n    var mr = getVLength(v1) * getVLength(v2);\n    if (mr === 0)\n        return 0;\n    var r = getDotProduct(v1, v2) / mr;\n    if (r > 1)\n        r = 1;\n    return Math.acos(r);\n});\n\nvar getCross = (function (v1, v2) {\n    return v1.x * v2.y - v2.x * v1.y;\n});\n\nvar radianToAngle = (function (radian) { return radian / Math.PI * 180; });\n\nvar getAngle = (function (v1, v2) {\n    var angle = getRadian(v1, v2);\n    if (getCross(v1, v2) > 0) {\n        angle *= -1;\n    }\n    return radianToAngle(angle);\n});\n\nvar getDirection = (function (x, y) {\n    if (x === y) {\n        return NONE;\n    }\n    else if (Math.abs(x) > Math.abs(y)) {\n        return 0 < x ? DIRECTION_RIGHT : DIRECTION_LEFT;\n    }\n    else {\n        return 0 < y ? DIRECTION_DOWN : DIRECTION_UP;\n    }\n});\n\nexport { getAngle, getCross, getDirection, getDotProduct, getRadian, getVLength, radianToAngle };\n","import { getAngle, radianToAngle, getVLength, getDirection } from '@any-touch/vector';\nimport { INPUT_START, INPUT_MOVE, CLIENT_X, CLIENT_Y, NONE, round2, COMPUTE_INTERVAL } from '@any-touch/shared';\n\nfunction computeAngle (_a) {\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\n    var deltaAngle = Math.round(getAngle(activeV, prevV));\n    var angle = Math.round(getAngle(activeV, startV));\n    return { angle: angle, deltaAngle: deltaAngle };\n}\n\nfunction ComputeDeltaXY() {\n    return function (input) {\n        var prevInput = input.prevInput;\n        var deltaX = 0;\n        var deltaY = 0;\n        var deltaXYAngle = 0;\n        if (void 0 !== prevInput) {\n            deltaX = input.x - prevInput.x;\n            deltaY = input.y - prevInput.y;\n            if (0 !== deltaX || 0 !== deltaY) {\n                var deltaXY = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n                deltaXYAngle = Math.round(radianToAngle(Math.acos(Math.abs(deltaX) / deltaXY)));\n            }\n        }\n        return { deltaX: deltaX, deltaY: deltaY, deltaXYAngle: deltaXYAngle };\n    };\n}\nComputeDeltaXY._id = \"ComputeDeltaXY\";\n\nfunction computeDistance() {\n    var displacementX = 0;\n    var displacementY = 0;\n    var distanceX = 0;\n    var distanceY = 0;\n    var distance = 0;\n    var overallDirection = NONE;\n    return function (input) {\n        var inputType = input.inputType, startInput = input.startInput;\n        if (INPUT_START === inputType) {\n            displacementX = 0;\n            displacementY = 0;\n            distanceX = 0;\n            distanceY = 0;\n            distance = 0;\n            overallDirection = NONE;\n        }\n        else if (INPUT_MOVE === inputType) {\n            displacementX = Math.round(input.points[0][CLIENT_X] - startInput.points[0][CLIENT_X]);\n            displacementY = Math.round(input.points[0][CLIENT_Y] - startInput.points[0][CLIENT_Y]);\n            distanceX = Math.abs(displacementX);\n            distanceY = Math.abs(displacementY);\n            distance = Math.round(getVLength({ x: distanceX, y: distanceY }));\n            overallDirection = getDirection(displacementX, displacementY);\n        }\n        return {\n            displacementX: displacementX, displacementY: displacementY, distanceX: distanceX, distanceY: distanceY, distance: distance, overallDirection: overallDirection\n        };\n    };\n}\ncomputeDistance._id = \"computeDistance\";\n\nfunction computeMaxLength() {\n    var maxPointLength = 0;\n    return function (input) {\n        var inputType = input.inputType;\n        if (INPUT_START === inputType) {\n            maxPointLength = input.pointLength;\n        }\n        return { maxPointLength: maxPointLength };\n    };\n}\ncomputeMaxLength._id = \"computeMaxLength\";\n\nfunction computeScale(_a) {\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\n    var deltaScale = round2(getVLength(activeV) / getVLength(prevV));\n    var scale = round2(getVLength(activeV) / getVLength(startV));\n    return { scale: scale, deltaScale: deltaScale };\n}\n\nfunction ComputeVAndDir() {\n    var velocityX = 0;\n    var velocityY = 0;\n    var speedX = 0;\n    var speedY = 0;\n    var direction;\n    var _lastValidInput;\n    return function (input) {\n        if (void 0 !== input) {\n            var inputType = input.inputType;\n            _lastValidInput = _lastValidInput || input.startInput;\n            var deltaTime = input.timestamp - _lastValidInput.timestamp;\n            if (INPUT_MOVE === inputType && COMPUTE_INTERVAL < deltaTime) {\n                var deltaX = input.x - _lastValidInput.x;\n                var deltaY = input.y - _lastValidInput.y;\n                speedX = Math.round(deltaX / deltaTime * 100) / 100;\n                speedY = Math.round(deltaY / deltaTime * 100) / 100;\n                velocityX = Math.abs(speedX);\n                velocityY = Math.abs(speedY);\n                direction = getDirection(deltaX, deltaY) || (direction);\n                _lastValidInput = input;\n            }\n        }\n        return { velocityX: velocityX, velocityY: velocityY, speedX: speedX, speedY: speedY, direction: direction };\n    };\n}\nComputeVAndDir._id = \"ComputeVAndDir\";\n\nfunction computeVector(input) {\n    return {\n        x: input.points[1][CLIENT_X] - input.points[0][CLIENT_X],\n        y: input.points[1][CLIENT_Y] - input.points[0][CLIENT_Y]\n    };\n}\n\nfunction ComputeVectorForMutli() {\n    return function (input) {\n        var prevInput = input.prevInput, startMultiInput = input.startMultiInput;\n        if (void 0 !== startMultiInput &&\n            void 0 !== prevInput &&\n            input.id !== startMultiInput.id &&\n            1 < input.pointLength) {\n            return {\n                startV: computeVector(startMultiInput),\n                prevV: computeVector(prevInput),\n                activeV: computeVector(input)\n            };\n        }\n    };\n}\nComputeVectorForMutli._id = \"ComputeVectorForMutli\";\n\nexport { ComputeDeltaXY, computeDistance as ComputeDistance, computeMaxLength as ComputeMaxLength, ComputeVAndDir, ComputeVectorForMutli, computeAngle, computeScale, computeVector };\n","import { __assign, __values } from 'tslib';\nimport { STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED, STATUS_POSSIBLE, STATUS_START, STATUS_MOVE, INPUT_MOVE, INPUT_END, INPUT_CANCEL, INPUT_START } from '@any-touch/shared';\n\nfunction resetStatus (recognizer) {\n    if (-1 !== [STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED].indexOf(recognizer.status)) {\n        recognizer.status = STATUS_POSSIBLE;\n    }\n}\n\nfunction flow(isVaild, activeStatus, inputType) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    var STATE_MAP = {\n        1: (_a = {},\n            _a[STATUS_POSSIBLE] = (_b = {},\n                _b[INPUT_MOVE] = STATUS_START,\n                _b),\n            _a[STATUS_START] = (_c = {},\n                _c[INPUT_MOVE] = STATUS_MOVE,\n                _c[INPUT_END] = STATUS_END,\n                _c[INPUT_CANCEL] = STATUS_CANCELLED,\n                _c),\n            _a[STATUS_MOVE] = (_d = {},\n                _d[INPUT_MOVE] = STATUS_MOVE,\n                _d[INPUT_END] = STATUS_END,\n                _d[INPUT_CANCEL] = STATUS_CANCELLED,\n                _d),\n            _a),\n        0: (_e = {},\n            _e[STATUS_START] = (_f = {},\n                _f[INPUT_MOVE] = STATUS_CANCELLED,\n                _f[INPUT_END] = STATUS_END,\n                _f[INPUT_CANCEL] = STATUS_CANCELLED,\n                _f),\n            _e[STATUS_MOVE] = (_g = {},\n                _g[INPUT_START] = STATUS_FAILED,\n                _g[INPUT_MOVE] = STATUS_CANCELLED,\n                _g[INPUT_END] = STATUS_END,\n                _g[INPUT_CANCEL] = STATUS_CANCELLED,\n                _g),\n            _e)\n    };\n    if (void 0 !== STATE_MAP[Number(isVaild)][activeStatus]) {\n        return STATE_MAP[Number(isVaild)][activeStatus][inputType] || activeStatus;\n    }\n    else {\n        return activeStatus;\n    }\n}\nfunction recognizeForPressMoveLike (recognizer, input, emit) {\n    var isVaild = recognizer.test(input);\n    resetStatus(recognizer);\n    var inputType = input.inputType;\n    recognizer.status = flow(isVaild, recognizer.status, inputType);\n    var computed = recognizer.computed;\n    recognizer.isRecognized = [STATUS_START, STATUS_MOVE].includes(recognizer.status);\n    var name = recognizer.name, status = recognizer.status, isRecognized = recognizer.isRecognized;\n    if (isRecognized) {\n        emit(name, computed);\n    }\n    if (isRecognized || [STATUS_END, STATUS_CANCELLED].includes(recognizer.status)) {\n        emit(name + status, computed);\n    }\n    return isVaild;\n}\n\nvar default_1 = (function () {\n    function default_1(options) {\n        this.disabled = false;\n        this.status = STATUS_POSSIBLE;\n        this.isRecognized = false;\n        this.recognizerMap = {};\n        this.computedGroup = {};\n        this.computed = {};\n        this.computeFunctionMap = {};\n        this.options = options;\n        this.name = this.options.name;\n    }\n    default_1.prototype.set = function (options) {\n        if (void 0 !== options) {\n            this.options = __assign(__assign({}, this.options), options);\n        }\n        return this;\n    };\n    default_1.prototype.isValidPointLength = function (pointLength) {\n        return 0 === this.options.pointLength || this.options.pointLength === pointLength;\n    };\n    default_1.prototype.compute = function (Cs, input) {\n        var e_1, _a;\n        var computed = Object.create(null);\n        try {\n            for (var Cs_1 = __values(Cs), Cs_1_1 = Cs_1.next(); !Cs_1_1.done; Cs_1_1 = Cs_1.next()) {\n                var C = Cs_1_1.value;\n                var _id = C._id;\n                var _b = this, computedGroup = _b.computedGroup, computeFunctionMap = _b.computeFunctionMap;\n                if (void 0 === computeFunctionMap[_id]) {\n                    computeFunctionMap[_id] = C();\n                }\n                computedGroup[_id] = computedGroup[_id] || computeFunctionMap[_id](input);\n                for (var key in computedGroup[_id]) {\n                    computed[key] = computedGroup[_id][key];\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (Cs_1_1 && !Cs_1_1.done && (_a = Cs_1.return)) _a.call(Cs_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return computed;\n    };\n    return default_1;\n}());\n\nexport default default_1;\nexport { recognizeForPressMoveLike, resetStatus as resetStatusForPressMoveLike };\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVAndDir, ComputeDistance, ComputeDeltaXY } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\n    name: 'pan',\n    threshold: 10,\n    pointLength: 1\n};\nvar default_1 = (function (_super) {\n    __extends(default_1, _super);\n    function default_1(options) {\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\n    }\n    default_1.prototype.test = function (input) {\n        var pointLength = input.pointLength;\n        var distance = this.computed.distance;\n        return ((this.isRecognized || this.options.threshold <= distance) &&\n            this.isValidPointLength(pointLength));\n    };\n    default_1.prototype.recognize = function (input, emit) {\n        this.computed = this.compute([ComputeVAndDir, ComputeDistance, ComputeDeltaXY], input);\n        var isRecognized = void 0 !== this.computed.direction && recognizeForPressMoveLike(this, input, emit);\n        if (isRecognized) {\n            emit(this.options.name + this.computed.direction, this.computed);\n        }\n    };\n    return default_1;\n}(Recognizer));\n\nexport default default_1;\n","export default class Observer {\r\n\tconstructor() {\r\n\t\tthis.observers = {}\r\n\t}\r\n\r\n\ton(name, cb) {\r\n\t\tif (!this.observers[name]) {\r\n\t\t\tthis.observers[name] = []\r\n\t\t}\r\n\t\tthis.observers[name].push(cb)\r\n\t}\r\n\r\n\tonce(name, cb) {\r\n\t\tconst wrapper = (...args) => {\r\n\t\t\tcb(...args)\r\n\t\t\tthis.off(name, wrapper)\r\n\t\t}\r\n\t\tthis.on(name, wrapper)\r\n\t}\r\n\r\n\toff(name, cb) {\r\n\t\tif (!this.observers[name]) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(this.observers[name])) {\r\n\t\t\tconst index = this.observers[name].indexOf(cb)\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tthis.observers[name].splice(index, 1)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (typeof this.observers[name] === 'function') {\r\n\t\t\tdelete this.observers[name]\r\n\t\t}\r\n\t}\r\n\r\n\temit(name, ...args) {\r\n\t\tconst observerItem = this.observers[name]\r\n\t\tif (!observerItem) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (Array.isArray(observerItem)) {\r\n\t\t\tthis.observers[name].forEach(cb => {\r\n\t\t\t\tcb && cb(...args)\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (typeof observerItem === 'function') {\r\n\t\t\tthis.observers[name](...args)\r\n\t\t}\r\n\t}\r\n}","/**\r\n * 获取图片文件信息\r\n * @param {File} file File对象\r\n * @return Promise {width,height,base64,size,type,file,img}\r\n * */\r\nexport const getFileImageInfo = file => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader()\r\n\t\treader.readAsDataURL(file)\r\n\t\treader.onload = e => {\r\n\t\t\tconst img = new Image()\r\n\t\t\timg.src = e.target.result\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tconst {width, height} = img\r\n\t\t\t\tresolve({\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tbase64: e.target.result,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\tfile,\r\n\t\t\t\t\timg\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\timg.onerror = e => {\r\n\t\t\t\tconsole.log('加载图片失败')\r\n\t\t\t\treject(e)\r\n\t\t\t}\r\n\t\t}\r\n\t\treader.onerror = e => {\r\n\t\t\tconsole.log('render图片失败')\r\n\t\t\treject(e)\r\n\t\t}\r\n\t})\r\n}\r\n\r\n/**\r\n * 图片文件缩放\r\n * @param {File} file File对象\r\n * @param {Number} maxWidth 图像最大宽度\r\n * @param {Number} encoderOptions 压缩等级 0-1\r\n * */\r\nexport const compress = (file, maxWidth = 1000, encoderOptions = 1) => {\r\n\treturn getFileImageInfo(file).then(res => {\r\n\t\tconst {width, height, img} = res\r\n\t\tconst canvas = document.createElement('canvas')\r\n\t\tconst ctx = canvas.getContext('2d')\r\n\r\n\t\t// 缩放图片至合适尺寸\r\n\t\tlet cw = width\r\n\t\tlet ch = height\r\n\t\tif (width > maxWidth) {\r\n\t\t\tcw = maxWidth\r\n\t\t\tch = (maxWidth * height) / width\r\n\t\t} else {\r\n\t\t\treturn file\r\n\t\t}\r\n\r\n\t\tcanvas.width = cw\r\n\t\tcanvas.height = ch\r\n\r\n\t\tctx.clearRect(0, 0, cw, ch)\r\n\t\tctx.drawImage(img, 0, 0, cw, ch)\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tcanvas.toBlob(blob => {\r\n\t\t\t\tblob.lastModifiedDate = new Date()\r\n\t\t\t\tconst f = new File([blob], file.name, {type: blob.type})\r\n\t\t\t\tresolve(f)\r\n\t\t\t}, file.type, encoderOptions)\r\n\t\t})\r\n\t})\r\n}","import AnyTouch from '@any-touch/core'\r\nimport Pan from '@any-touch/pan'\r\nimport Observer from './Observer'\r\nimport {getFileImageInfo, compress} from './utils'\r\n\r\nAnyTouch.use(Pan)\r\nexport default class ImageClipper extends Observer {\r\n\tconstructor(el, options = {}) {\r\n\t\tsuper()\r\n\t\tthis.dpi = window.devicePixelRatio\r\n\t\tthis.options = options\r\n\t\tthis.rootDom = el\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.createDom()\r\n\t}\r\n\r\n\tsetLoading(text) {\r\n\t\tconst loadingText = text || this.options.loadingText || '加载中'\r\n\t\tconst loading = this.rootDom.querySelector('.ic-loading')\r\n\t\tloading.style.display = ''\r\n\t\tloading.innerHTML = loadingText\r\n\t}\r\n\r\n\tcloseLoading() {\r\n\t\tconst loading = this.rootDom.querySelector('.ic-loading')\r\n\t\tloading.style.display = 'none'\r\n\t}\r\n\r\n\tcreateDom() {\r\n\t\tthis.rootDom.innerHTML = `\r\n\t\t<div class=\"ic-wrap image-clipper\">\r\n\t\t\t<div class=\"ic-loading\"></div>\r\n\t\t\t<div class=\"clipper-wrap\">\r\n\t\t\t\t<img src=\"\" class=\"clip-img\" alt=\"\">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t`\r\n\t\tthis.clipperWrap = this.rootDom.querySelector('.clipper-wrap')\r\n\t}\r\n\r\n\tdestruction() {\r\n\t\tif (this.frame) {\r\n\t\t\tthis.clipperWrap.removeChild(this.frame)\r\n\t\t}\r\n\t\tthis.clipperWrapData = null\r\n\t\tthis.clipImg = null\r\n\t\tthis.frameData = null\r\n\t}\r\n\r\n\tstart(file) {\r\n\t\tthis.destruction()\r\n\t\tthis.setLoading()\r\n\t\tthis.file = file\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tcompress(file).then(file => {\r\n\t\t\t\tgetFileImageInfo(file).then(res => {\r\n\t\t\t\t\tconst {width, height, base64} = res\r\n\t\t\t\t\tthis.clipImg = this.clipperWrap.querySelector('.clip-img')\r\n\t\t\t\t\tthis.clipImg.src = base64\r\n\r\n\t\t\t\t\tconst w = this.clipperWrap.clientWidth\r\n\t\t\t\t\tthis.clipperWrapData = {\r\n\t\t\t\t\t\twidth: w,\r\n\t\t\t\t\t\theight: (w * height) / width,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clipperWrap.style.width = this.clipperWrapData.width + 'px'\r\n\t\t\t\t\tthis.clipperWrap.style.height = this.clipperWrapData.height + 'px'\r\n\t\t\t\t\tthis.clipperWrap.style.backgroundImage = `url(${base64})`\r\n\r\n\t\t\t\t\tthis.createOperateFrame()\r\n\t\t\t\t\tthis.closeLoading()\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tclipper2Canvas() {\r\n\t\tconst dpi = 1\r\n\t\tlet {left: x, top: y, width: w, height: h} = this.frameData\r\n\t\tconst {width, height} = this.clipperWrapData\r\n\t\tconst canvas = document.createElement('canvas')\r\n\t\tconst ctx = canvas.getContext('2d')\r\n\r\n\t\tx *= dpi\r\n\t\ty *= dpi\r\n\t\tw *= dpi\r\n\t\th *= dpi\r\n\t\tcanvas.width = w\r\n\t\tcanvas.height = h\r\n\r\n\t\tctx.drawImage(this.clipImg, -x, -y, width * dpi, height * dpi)\r\n\t\treturn canvas\r\n\t}\r\n\r\n\tcreateOperateFrame() {\r\n\t\tconst frame = document.createElement('div')\r\n\t\tframe.setAttribute('class', 'operate-frame')\r\n\t\tthis.frame = frame\r\n\t\tconst {width, height} = this.clipperWrapData\r\n\t\tthis.setFrame(30, 30, width - 60, height - 60)\r\n\t\tframe.innerHTML = `<div class=\"box\"></div>\r\n                            <div class=\"lt\"></div>\r\n                            <div class=\"rt\"></div>\r\n                            <div class=\"lb\"></div>\r\n                            <div class=\"rb\"></div>\r\n                            <div class=\"t\"></div>\r\n                            <div class=\"r\"></div>\r\n                            <div class=\"b\"></div>\r\n                            <div class=\"l\"></div>`\r\n\t\tthis.clipperWrap.appendChild(frame)\r\n\t\tthis.operateEvent()\r\n\t}\r\n\r\n\toperateEvent() {\r\n\t\tconst frame = this.frame\r\n\r\n\t\t// 拖动裁剪框\r\n\t\tconst box = frame.querySelector('.box')\r\n\t\tnew AnyTouch(box)\r\n\t\tbox.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tthis.updateFrame(x, y, 0, 0)\r\n\t\t})\r\n\t\tbox.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left + x, top + y, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动上边框\r\n\t\tconst t = frame.querySelector('.t')\r\n\t\tnew AnyTouch(t)\r\n\t\tt.addEventListener('pan', event => {\r\n\t\t\tconst {displacementY: y} = event\r\n\t\t\tthis.updateFrame(0, y, 0, -y)\r\n\t\t})\r\n\t\tt.addEventListener('panend', event => {\r\n\t\t\tconst {displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left, top + y, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动下边框\r\n\t\tconst b = frame.querySelector('.b')\r\n\t\tnew AnyTouch(b)\r\n\t\tb.addEventListener('pan', event => {\r\n\t\t\tconst {displacementY: y} = event\r\n\t\t\tthis.updateFrame(0, 0, 0, y)\r\n\t\t})\r\n\t\tb.addEventListener('panend', event => {\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left, top, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动左边框\r\n\t\tconst l = frame.querySelector('.l')\r\n\t\tnew AnyTouch(l)\r\n\t\tl.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x} = event\r\n\t\t\tthis.updateFrame(x, 0, -x, 0)\r\n\t\t})\r\n\t\tl.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left + x, top, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动右边框\r\n\t\tconst r = frame.querySelector('.r')\r\n\t\tnew AnyTouch(r)\r\n\t\tr.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x} = event\r\n\t\t\tthis.updateFrame(0, 0, x, 0)\r\n\t\t})\r\n\t\tr.addEventListener('panend', event => {\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left, top, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动左上\r\n\t\tconst lt = frame.querySelector('.lt')\r\n\t\tnew AnyTouch(lt)\r\n\t\tlt.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tthis.updateFrame(x, y, -x, -y)\r\n\t\t})\r\n\t\tlt.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left + x, top + y, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动右上\r\n\t\tconst rt = frame.querySelector('.rt')\r\n\t\tnew AnyTouch(rt)\r\n\t\trt.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tthis.updateFrame(0, y, x, -y)\r\n\t\t})\r\n\t\trt.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left, top + y, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动左下\r\n\t\tconst lb = frame.querySelector('.lb')\r\n\t\tnew AnyTouch(lb)\r\n\t\tlb.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tthis.updateFrame(x, 0, -x, y)\r\n\t\t})\r\n\t\tlb.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left + x, top, offsetWidth, offsetHeight)\r\n\t\t})\r\n\r\n\t\t// 拖动右下\r\n\t\tconst rb = frame.querySelector('.rb')\r\n\t\tnew AnyTouch(rb)\r\n\t\trb.addEventListener('pan', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tthis.updateFrame(0, 0, x, y)\r\n\t\t})\r\n\t\trb.addEventListener('panend', event => {\r\n\t\t\tconst {displacementX: x, displacementY: y} = event\r\n\t\t\tconst {left, top} = this.frameData\r\n\t\t\tconst {offsetWidth, offsetHeight} = frame\r\n\t\t\tthis.setFrame(left, top, offsetWidth, offsetHeight)\r\n\t\t})\r\n\t}\r\n\r\n\tsetClipImgPosition(x, y, w, h) {\r\n\t\tlet right = w + x\r\n\t\tlet bottom = h + y\r\n\t\tthis.clipImg.style.clip = `rect(${y}px, ${right}px, ${bottom}px, ${x}px)`\r\n\t}\r\n\r\n\tsetFrameCommon(x, y, w, h) {\r\n\t\tthis.frame.style.left = x + 'px'\r\n\t\tthis.frame.style.top = y + 'px'\r\n\t\tthis.frame.style.width = w + 'px'\r\n\t\tthis.frame.style.height = h + 'px'\r\n\t\tthis.setClipImgPosition(x, y, w, h)\r\n\t\treturn [x, y, w, h]\r\n\t}\r\n\r\n\tupdateFrame(x, y, w, h) {\r\n\t\tlet left = this.frameData.left + x\r\n\t\tlet top = this.frameData.top + y\r\n\t\tlet width = this.frameData.width + w\r\n\t\tlet height = this.frameData.height + h\r\n\r\n\t\tconst [a, b, c, d] = this.verifyInfo(left, top, width, height)\r\n\t\tthis.setFrameCommon(a, b, c, d, true)\r\n\t}\r\n\r\n\tsetFrame(x, y, w, h) {\r\n\t\t[x, y, w, h] = this.verifyInfo(x, y, w, h)\r\n\t\tthis.frameData = {\r\n\t\t\tleft: x,\r\n\t\t\ttop: y,\r\n\t\t\twidth: w,\r\n\t\t\theight: h,\r\n\t\t}\r\n\t\tthis.setFrameCommon(x, y, w, h)\r\n\t\tthis.emit('change')\r\n\t\tthis.clipper2Canvas()\r\n\t}\r\n\r\n\tverifyInfo(x, y, w, h) {\r\n\t\tconst {width: cw, height: ch} = this.clipperWrapData\r\n\t\tif (x + w >= cw) {\r\n\t\t\tx = cw - w\r\n\t\t}\r\n\t\tif (x <= 0) {\r\n\t\t\tx = 0\r\n\t\t}\r\n\t\tif (y + h >= ch) {\r\n\t\t\ty = ch - h\r\n\t\t}\r\n\t\tif (y <= 0) {\r\n\t\t\ty = 0\r\n\t\t}\r\n\t\tif (w > cw) {\r\n\t\t\tw = cw\r\n\t\t}\r\n\t\tif (h > ch) {\r\n\t\t\th = ch\r\n\t\t}\r\n\t\treturn [x, y, w, h]\r\n\t}\r\n\r\n\tclipper2File(encoderOptions = 1) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst {name, type} = this.file\r\n\t\t\tthis.clipper2Canvas().toBlob(blob => {\r\n\t\t\t\tconst file = new File([blob], name, {type})\r\n\t\t\t\tresolve(file)\r\n\t\t\t}, type, encoderOptions)\r\n\t\t})\r\n\t}\r\n}"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","ar","push","error","default_1","listenersMap","target","el","_this","on","eventName","listener","_a","off","listeners","index","findIndex","fn","splice","emit","payload","beforeHook","e_1","listeners_1","listeners_1_1","e_1_1","return","destroy","ObjectToString","toString","isRegExp","input","isFunction","CLIENT_X","CLIENT_Y","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_CANCEL","INPUT_END","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","NONE","TOUCH","MOUSE","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","MOUSE_UP","MOUSE_MOVE","MOUSE_DOWN","SUPPORT_TOUCH","window","STATUS_POSSIBLE","STATUS_START","STATUS_MOVE","STATUS_END","STATUS_RECOGNIZED","STATUS_FAILED","STATUS_CANCELLED","default_1$1","_super","load","event","targets","points","from","touches","map","clientX","clientY","changedPoints","changedTouches","inputType","type","replace","nativeEvent","default_1$2","isPressed","button","prevPoints","default_1$3","Input","adapter","id","transform","prevInput","activeInput","baseInputWithoutId","Number","MAX_SAFE_INTEGER","baseInput","pureInput","extendInput","isStart","pointLength","startInput","startMultiInput","getCenter","x","Math","round","y","countPoint","reduce","point","inputBase","isEnd","timestamp","performance","now","currentTarget","getOffset","rect","getBoundingClientRect","left","top","dispatchDomEvent","eventInit","data","document","createEvent","initEvent","bubbles","cancelable","Event","match","every","contains","dispatchEvent","canPreventDefault","options","isPreventDefault","preventDefaultExclude","tagName","test","TOUCH_EVENT_NAMES","bindElement","callback","forEach","addEventListener","removeEventListener","use","instanceOrClass","Recognizer","name","recognizerMap","instance","recognizers","removeUse","recognizerName","_b","entries","_c","_d","recognizer","emit2","at","currentTarget_1","AT_AFTER","domEvents","DEFAULT_OPTIONS","AnyTouch","cacheComputedFunctionGroup","style","webkitTapHighlightColor","supportsPassive_1","opts","defineProperty","get","catchEvent","bind","passive","preventDefault","AT_TOUCH","AT_TOUCH_WITH_STATUS","cacheComputedGroup","_loop_1","disabled","computedGroup","computeFunctionMap","this_1","recognize","ev","baseType","freeze","beforeEachHook","beforeEach","hook","set","version","AnyEvent","getVLength","v","sqrt","radianToAngle","radian","PI","getDirection","abs","ComputeDeltaXY","deltaX","deltaY","deltaXYAngle","deltaXY","pow","acos","_id","computeDistance","displacementX","displacementY","distanceX","distanceY","distance","overallDirection","ComputeVAndDir","velocityX","velocityY","speedX","speedY","direction","_lastValidInput","deltaTime","resetStatus","status","flow","isVaild","activeStatus","_e","_f","_g","STATE_MAP","recognizeForPressMoveLike","computed","isRecognized","includes","isValidPointLength","compute","Cs","Cs_1","Cs_1_1","C","key","threshold","ComputeDistance","Observer","observers","cb","wrapper","isArray","args","observerItem","getFileImageInfo","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","img","Image","src","result","width","height","base64","size","onerror","console","log","compress","maxWidth","encoderOptions","then","res","canvas","createElement","ctx","getContext","cw","ch","clearRect","drawImage","toBlob","blob","lastModifiedDate","Date","f","File","Pan","ImageClipper","dpi","devicePixelRatio","rootDom","init","createDom","text","loadingText","loading","querySelector","display","innerHTML","clipperWrap","frame","removeChild","clipperWrapData","clipImg","frameData","destruction","setLoading","w","clientWidth","backgroundImage","createOperateFrame","closeLoading","h","setAttribute","setFrame","appendChild","operateEvent","box","updateFrame","offsetWidth","offsetHeight","l","lt","rt","lb","rb","right","bottom","clip","setClipImgPosition","verifyInfo","a","c","setFrameCommon","clipper2Canvas"],"mappings":"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"}